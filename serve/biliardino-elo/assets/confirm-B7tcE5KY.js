import"./modulepreload-polyfill-B5Qt9EMX.js";const r=new URLSearchParams(window.location.search),n=r.get("time")||"11:00";document.getElementById("match-time").textContent=n;async function o(){try{const e=await(await fetch("/api/get-confirmations?time="+n)).json();document.getElementById("queue-count").textContent=e.count||0}catch(t){console.error("Errore caricamento conferme:",t)}}async function a(){await o(),document.getElementById("loading-state").style.display="none",document.getElementById("confirm-state").style.display="block",setInterval(o,5e3)}document.getElementById("confirm-btn").addEventListener("click",async()=>{const t=document.getElementById("confirm-btn");t.disabled=!0,t.textContent="Conferma in corso...";try{const e=localStorage.getItem("biliardino_player_id");if(!e)throw new Error("ID giocatore non trovato");if(!(await fetch("/api/confirm-availability",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:e,matchTime:n})})).ok)throw new Error("Errore nella conferma");document.getElementById("confirm-state").style.display="none",document.getElementById("success-state").style.display="block"}catch(e){console.error("Errore conferma:",e),document.getElementById("error-message").textContent=e.message,document.getElementById("confirm-state").style.display="none",document.getElementById("error-state").style.display="block"}});document.getElementById("retry-btn")?.addEventListener("click",()=>{document.getElementById("error-state").style.display="none",document.getElementById("confirm-state").style.display="block",document.getElementById("confirm-btn").disabled=!1,document.getElementById("confirm-btn").textContent="âœ“ Confermo la mia presenza"});a();
