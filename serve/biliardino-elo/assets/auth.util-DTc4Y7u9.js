import{L as Qi,I as ii,_ as Zi,g as ts,F as es,a as si,b as ns,C as is,r as bn,S as ss,o as rs,s as os,c as hs}from"./firebase-BkA1I5aN.js";var $t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var l,i=Object.defineProperty;function r(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof $t=="object"&&$t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var o=r(this);function a(t,e){if(e)t:{var n=o;t=t.split(".");for(var s=0;s<t.length-1;s++){var h=t[s];if(!(h in n))break t;n=n[h]}t=t[t.length-1],s=n[t],e=e(s),e!=s&&e!=null&&i(n,t,{configurable:!0,writable:!0,value:e})}}a("Symbol.dispose",function(t){return t||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(t){return t||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(t){return t||function(e){var n=[],s;for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.push([s,e[s]]);return n}});var c=c||{},f=this||self;function p(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function w(t,e,n){return t.call.apply(t.bind,arguments)}function P(t,e,n){return P=w,P.apply(null,arguments)}function M(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function S(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Ob=function(s,h,u){for(var g=Array(arguments.length-2),d=2;d<arguments.length;d++)g[d-2]=arguments[d];return e.prototype[h].apply(s,g)}}var Mt=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?t=>t&&AsyncContext.Snapshot.wrap(t):t=>t;function H(t){const e=t.length;if(e>0){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function xt(t,e){for(let s=1;s<arguments.length;s++){const h=arguments[s];var n=typeof h;if(n=n!="object"?n:h?Array.isArray(h)?"array":n:"null",n=="array"||n=="object"&&typeof h.length=="number"){n=t.length||0;const u=h.length||0;t.length=n+u;for(let g=0;g<u;g++)t[n+g]=h[g]}else t.push(h)}}class se{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function fi(t){f.setTimeout(()=>{throw t},0)}function gi(){var t=re;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class pi{constructor(){this.h=this.g=null}add(e,n){const s=Fe.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var Fe=new se(()=>new di,t=>t.reset());class di{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}let gt,pt=!1,re=new pi,Ue=()=>{const t=Promise.resolve(void 0);gt=()=>{t.then(mi)}};function mi(){for(var t;t=gi();){try{t.h.call(t.g)}catch(n){fi(n)}var e=Fe;e.j(t),e.h<100&&(e.h++,t.next=e.g,e.g=t)}pt=!1}function G(){this.u=this.u,this.C=this.C}G.prototype.u=!1,G.prototype.dispose=function(){this.u||(this.u=!0,this.N())},G.prototype[Symbol.dispose]=function(){this.dispose()},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var yi=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};f.addEventListener("test",n,e),f.removeEventListener("test",n,e)}catch{}return t})();function dt(t){return/^[\s\xa0]*$/.test(t)}function ht(t,e){D.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t&&this.init(t,e)}S(ht,D),ht.prototype.init=function(t,e){const n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget,e||(n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement)),this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=t.pointerType,this.state=t.state,this.i=t,t.defaultPrevented&&ht.Z.h.call(this)},ht.prototype.h=function(){ht.Z.h.call(this);const t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ft="closure_listenable_"+(Math.random()*1e6|0),_i=0;function vi(t,e,n,s,h){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ha=h,this.key=++_i,this.da=this.fa=!1}function Ut(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function bt(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function wi(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function be(t){const e={};for(const n in t)e[n]=t[n];return e}const Be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function He(t,e){let n,s;for(let h=1;h<arguments.length;h++){s=arguments[h];for(n in s)t[n]=s[n];for(let u=0;u<Be.length;u++)n=Be[u],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function Bt(t){this.src=t,this.g={},this.h=0}Bt.prototype.add=function(t,e,n,s,h){const u=t.toString();t=this.g[u],t||(t=this.g[u]=[],this.h++);const g=he(t,e,s,h);return g>-1?(e=t[g],n||(e.fa=!1)):(e=new vi(e,this.src,u,!!s,h),e.fa=n,t.push(e)),e};function oe(t,e){const n=e.type;if(n in t.g){var s=t.g[n],h=Array.prototype.indexOf.call(s,e,void 0),u;(u=h>=0)&&Array.prototype.splice.call(s,h,1),u&&(Ut(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function he(t,e,n,s){for(let h=0;h<t.length;++h){const u=t[h];if(!u.da&&u.listener==e&&u.capture==!!n&&u.ha==s)return h}return-1}var le="closure_lm_"+(Math.random()*1e6|0),ue={};function Ge(t,e,n,s,h){if(Array.isArray(e)){for(let u=0;u<e.length;u++)Ge(t,e[u],n,s,h);return null}return n=Je(n),t&&t[Ft]?t.J(e,n,p(s)?!!s.capture:!1,h):Ei(t,e,n,!1,s,h)}function Ei(t,e,n,s,h,u){if(!e)throw Error("Invalid event type");const g=p(h)?!!h.capture:!!h;let d=ce(t);if(d||(t[le]=d=new Bt(t)),n=d.add(e,n,s,g,u),n.proxy)return n;if(s=Ti(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)yi||(h=g),h===void 0&&(h=!1),t.addEventListener(e.toString(),s,h);else if(t.attachEvent)t.attachEvent(Xe(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Ti(){function t(n){return e.call(t.src,t.listener,n)}const e=Ai;return t}function qe(t,e,n,s,h){if(Array.isArray(e))for(var u=0;u<e.length;u++)qe(t,e[u],n,s,h);else s=p(s)?!!s.capture:!!s,n=Je(n),t&&t[Ft]?(t=t.i,u=String(e).toString(),u in t.g&&(e=t.g[u],n=he(e,n,s,h),n>-1&&(Ut(e[n]),Array.prototype.splice.call(e,n,1),e.length==0&&(delete t.g[u],t.h--)))):t&&(t=ce(t))&&(e=t.g[e.toString()],t=-1,e&&(t=he(e,n,s,h)),(n=t>-1?e[t]:null)&&ae(n))}function ae(t){if(typeof t!="number"&&t&&!t.da){var e=t.src;if(e&&e[Ft])oe(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(Xe(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=ce(e))?(oe(n,t),n.h==0&&(n.src=null,e[le]=null)):Ut(t)}}}function Xe(t){return t in ue?ue[t]:ue[t]="on"+t}function Ai(t,e){if(t.da)t=!0;else{e=new ht(e,this);const n=t.listener,s=t.ha||t.src;t.fa&&ae(t),t=n.call(s,e)}return t}function ce(t){return t=t[le],t instanceof Bt?t:null}var fe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Je(t){return typeof t=="function"?t:(t[fe]||(t[fe]=function(e){return t.handleEvent(e)}),t[fe])}function C(){G.call(this),this.i=new Bt(this),this.M=this,this.G=null}S(C,G),C.prototype[Ft]=!0,C.prototype.removeEventListener=function(t,e,n,s){qe(this,t,e,n,s)};function N(t,e){var n,s=t.G;if(s)for(n=[];s;s=s.G)n.push(s);if(t=t.M,s=e.type||e,typeof e=="string")e=new D(e,t);else if(e instanceof D)e.target=e.target||t;else{var h=e;e=new D(s,t),He(e,h)}h=!0;let u,g;if(n)for(g=n.length-1;g>=0;g--)u=e.g=n[g],h=Ht(u,s,!0,e)&&h;if(u=e.g=t,h=Ht(u,s,!0,e)&&h,h=Ht(u,s,!1,e)&&h,n)for(g=0;g<n.length;g++)u=e.g=n[g],h=Ht(u,s,!1,e)&&h}C.prototype.N=function(){if(C.Z.N.call(this),this.i){var t=this.i;for(const e in t.g){const n=t.g[e];for(let s=0;s<n.length;s++)Ut(n[s]);delete t.g[e],t.h--}}this.G=null},C.prototype.J=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)},C.prototype.K=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function Ht(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();let h=!0;for(let u=0;u<e.length;++u){const g=e[u];if(g&&!g.da&&g.capture==n){const d=g.listener,I=g.ha||g.src;g.fa&&oe(t.i,g),h=d.call(I,s)!==!1&&h}}return h&&!s.defaultPrevented}function Si(t,e){if(typeof t!="function")if(t&&typeof t.handleEvent=="function")t=P(t.handleEvent,t);else throw Error("Invalid listener argument");return Number(e)>2147483647?-1:f.setTimeout(t,e||0)}function Ke(t){t.g=Si(()=>{t.g=null,t.i&&(t.i=!1,Ke(t))},t.l);const e=t.h;t.h=null,t.m.apply(null,e)}class Ii extends G{constructor(e,n){super(),this.m=e,this.l=n,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Ke(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mt(t){G.call(this),this.h=t,this.g={}}S(mt,G);var We=[];function Ye(t){bt(t.g,function(e,n){this.g.hasOwnProperty(n)&&ae(e)},t),t.g={}}mt.prototype.N=function(){mt.Z.N.call(this),Ye(this)},mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ge=f.JSON.stringify,Pi=f.JSON.parse,Ri=class{stringify(t){return f.JSON.stringify(t,void 0)}parse(t){return f.JSON.parse(t,void 0)}};function ze(){}function Di(){}var yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pe(){D.call(this,"d")}S(pe,D);function de(){D.call(this,"c")}S(de,D);var lt={},$e=null;function me(){return $e=$e||new C}lt.Ia="serverreachability";function Qe(t){D.call(this,lt.Ia,t)}S(Qe,D);function _t(t){const e=me();N(e,new Qe(e))}lt.STAT_EVENT="statevent";function Ze(t,e){D.call(this,lt.STAT_EVENT,t),this.stat=e}S(Ze,D);function O(t){const e=me();N(e,new Ze(e,t))}lt.Ja="timingevent";function tn(t,e){D.call(this,lt.Ja,t),this.size=e}S(tn,D);function vt(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){t()},e)}function wt(){this.g=!0}wt.prototype.ua=function(){this.g=!1};function Ci(t,e,n,s,h,u){t.info(function(){if(t.g)if(u){var g="",d=u.split("&");for(let v=0;v<d.length;v++){var I=d[v].split("=");if(I.length>1){const R=I[0];I=I[1];const F=R.split("_");g=F.length>=2&&F[1]=="type"?g+(R+"="+I+"&"):g+(R+"=redacted&")}}}else g=null;else g=u;return"XMLHTTP REQ ("+s+") [attempt "+h+"]: "+e+`
`+n+`
`+g})}function Ni(t,e,n,s,h,u,g){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+h+"]: "+e+`
`+n+`
`+u+" "+g})}function ut(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Li(t,n)+(s?" "+s:"")})}function Oi(t,e){t.info(function(){return"TIMEOUT: "+e})}wt.prototype.info=function(){};function Li(t,e){if(!t.g)return e;if(!e)return null;try{const u=JSON.parse(e);if(u){for(t=0;t<u.length;t++)if(Array.isArray(u[t])){var n=u[t];if(!(n.length<2)){var s=n[1];if(Array.isArray(s)&&!(s.length<1)){var h=s[0];if(h!="noop"&&h!="stop"&&h!="close")for(let g=1;g<s.length;g++)s[g]=""}}}}return ge(u)}catch{return e}}var ye={NO_ERROR:0,TIMEOUT:8},ki={},en;function _e(){}S(_e,ze),_e.prototype.g=function(){return new XMLHttpRequest},en=new _e;function Et(t){return encodeURIComponent(String(t))}function ji(t){var e=1;t=t.split(":");const n=[];for(;e>0&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function X(t,e,n,s){this.j=t,this.i=e,this.l=n,this.S=s||1,this.V=new mt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new nn}function nn(){this.i=null,this.g="",this.h=!1}var sn={},ve={};function we(t,e,n){t.M=1,t.A=qt(x(e)),t.u=n,t.R=!0,rn(t,null)}function rn(t,e){t.F=Date.now(),Gt(t),t.B=x(t.A);var n=t.B,s=t.S;Array.isArray(s)||(s=[String(s)]),_n(n.i,"t",s),t.C=0,n=t.j.L,t.h=new nn,t.g=Mn(t.j,n?e:null,!t.u),t.P>0&&(t.O=new Ii(P(t.Y,t,t.g),t.P)),e=t.V,n=t.g,s=t.ba;var h="readystatechange";Array.isArray(h)||(h&&(We[0]=h.toString()),h=We);for(let u=0;u<h.length;u++){const g=Ge(n,h[u],s||e.handleEvent,!1,e.h||e);if(!g)break;e.g[g.key]=g}e=t.J?be(t.J):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.B,t.v,t.u,e)):(t.v="GET",t.g.ea(t.B,t.v,null,e)),_t(),Ci(t.i,t.v,t.B,t.l,t.S,t.u)}X.prototype.ba=function(t){t=t.target;const e=this.O;e&&W(t)==3?e.j():this.Y(t)},X.prototype.Y=function(t){try{if(t==this.g)t:{const d=W(this.g),I=this.g.ya(),v=this.g.ca();if(!(d<3)&&(d!=3||this.g&&(this.h.h||this.g.la()||In(this.g)))){this.K||d!=4||I==7||(I==8||v<=0?_t(3):_t(2)),Ee(this);var e=this.g.ca();this.X=e;var n=Vi(this);if(this.o=e==200,Ni(this.i,this.v,this.B,this.l,this.S,d,e),this.o){if(this.U&&!this.L){e:{if(this.g){var s,h=this.g;if((s=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dt(s)){var u=s;break e}}u=null}if(t=u)ut(this.i,this.l,t,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Te(this,t);else{this.o=!1,this.m=3,O(12),Q(this),Tt(this);break t}}if(this.R){t=!0;let R;for(;!this.K&&this.C<n.length;)if(R=Mi(this,n),R==ve){d==4&&(this.m=4,O(14),t=!1),ut(this.i,this.l,null,"[Incomplete Response]");break}else if(R==sn){this.m=4,O(15),ut(this.i,this.l,n,"[Invalid Chunk]"),t=!1;break}else ut(this.i,this.l,R,null),Te(this,R);if(on(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),d!=4||n.length!=0||this.h.h||(this.m=1,O(16),t=!1),this.o=this.o&&t,!t)ut(this.i,this.l,n,"[Invalid Chunked Response]"),Q(this),Tt(this);else if(n.length>0&&!this.W){this.W=!0;var g=this.j;g.g==this&&g.aa&&!g.P&&(g.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ne(g),g.P=!0,O(11))}}else ut(this.i,this.l,n,null),Te(this,n);d==4&&Q(this),this.o&&!this.K&&(d==4?Ln(this.j,this):(this.o=!1,Gt(this)))}else zi(this.g),e==400&&n.indexOf("Unknown SID")>0?(this.m=3,O(12)):(this.m=0,O(13)),Q(this),Tt(this)}}}catch{}};function Vi(t){if(!on(t))return t.g.la();const e=In(t.g);if(e==="")return"";let n="";const s=e.length,h=W(t.g)==4;if(!t.h.i){if(typeof TextDecoder>"u")return Q(t),Tt(t),"";t.h.i=new f.TextDecoder}for(let u=0;u<s;u++)t.h.h=!0,n+=t.h.i.decode(e[u],{stream:!(h&&u==s-1)});return e.length=0,t.h.g+=n,t.C=0,t.h.g}function on(t){return t.g?t.v=="GET"&&t.M!=2&&t.j.Aa:!1}function Mi(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?ve:(n=Number(e.substring(n,s)),isNaN(n)?sn:(s+=1,s+n>e.length?ve:(e=e.slice(s,s+n),t.C=s+n,e)))}X.prototype.cancel=function(){this.K=!0,Q(this)};function Gt(t){t.T=Date.now()+t.H,hn(t,t.H)}function hn(t,e){if(t.D!=null)throw Error("WatchDog timer not null");t.D=vt(P(t.aa,t),e)}function Ee(t){t.D&&(f.clearTimeout(t.D),t.D=null)}X.prototype.aa=function(){this.D=null;const t=Date.now();t-this.T>=0?(Oi(this.i,this.B),this.M!=2&&(_t(),O(17)),Q(this),this.m=2,Tt(this)):hn(this,this.T-t)};function Tt(t){t.j.I==0||t.K||Ln(t.j,t)}function Q(t){Ee(t);var e=t.O;e&&typeof e.dispose=="function"&&e.dispose(),t.O=null,Ye(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.dispose())}function Te(t,e){try{var n=t.j;if(n.I!=0&&(n.g==t||Ae(n.h,t))){if(!t.L&&Ae(n.h,t)&&n.I==3){try{var s=n.Ba.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var h=s;if(h[0]==0){t:if(!n.v){if(n.g)if(n.g.F+3e3<t.F)Yt(n),Kt(n);else break t;Ce(n),O(18)}}else n.xa=h[1],0<n.xa-n.K&&h[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=vt(P(n.Va,n),6e3));an(n.h)<=1&&n.ta&&(n.ta=void 0)}else tt(n,11)}else if((t.L||n.g==t)&&Yt(n),!dt(e))for(h=n.Ba.g.parse(e),e=0;e<h.length;e++){let v=h[e];const R=v[0];if(!(R<=n.K))if(n.K=R,v=v[1],n.I==2)if(v[0]=="c"){n.M=v[1],n.ba=v[2];const F=v[3];F!=null&&(n.ka=F,n.j.info("VER="+n.ka));const et=v[4];et!=null&&(n.za=et,n.j.info("SVER="+n.za));const Y=v[5];Y!=null&&typeof Y=="number"&&Y>0&&(s=1.5*Y,n.O=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const z=t.g;if(z){const zt=z.g?z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zt){var u=s.h;u.g||zt.indexOf("spdy")==-1&&zt.indexOf("quic")==-1&&zt.indexOf("h2")==-1||(u.j=u.l,u.g=new Set,u.h&&(Se(u,u.h),u.h=null))}if(s.G){const Oe=z.g?z.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(s.wa=Oe,E(s.J,s.G,Oe))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-t.F,n.j.info("Handshake RTT: "+n.T+"ms")),s=n;var g=t;if(s.na=Vn(s,s.L?s.ba:null,s.W),g.L){cn(s.h,g);var d=g,I=s.O;I&&(d.H=I),d.D&&(Ee(d),Gt(d)),s.g=g}else Nn(s);n.i.length>0&&Wt(n)}else v[0]!="stop"&&v[0]!="close"||tt(n,7);else n.I==3&&(v[0]=="stop"||v[0]=="close"?v[0]=="stop"?tt(n,7):De(n):v[0]!="noop"&&n.l&&n.l.qa(v),n.A=0)}}_t(4)}catch{}}var xi=class{constructor(t,e){this.g=t,this.map=e}};function ln(t){this.l=t||10,f.PerformanceNavigationTiming?(t=f.performance.getEntriesByType("navigation"),t=t.length>0&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function un(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function an(t){return t.h?1:t.g?t.g.size:0}function Ae(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Se(t,e){t.g?t.g.add(e):t.h=e}function cn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}ln.prototype.cancel=function(){if(this.i=fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function fn(t){if(t.h!=null)return t.i.concat(t.h.G);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.G);return e}return H(t.i)}var gn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fi(t,e){if(t){t=t.split("&");for(let n=0;n<t.length;n++){const s=t[n].indexOf("=");let h,u=null;s>=0?(h=t[n].substring(0,s),u=t[n].substring(s+1)):h=t[n],e(h,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}function J(t){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let e;t instanceof J?(this.l=t.l,At(this,t.j),this.o=t.o,this.g=t.g,St(this,t.u),this.h=t.h,Ie(this,vn(t.i)),this.m=t.m):t&&(e=String(t).match(gn))?(this.l=!1,At(this,e[1]||"",!0),this.o=It(e[2]||""),this.g=It(e[3]||"",!0),St(this,e[4]),this.h=It(e[5]||"",!0),Ie(this,e[6]||"",!0),this.m=It(e[7]||"")):(this.l=!1,this.i=new Rt(null,this.l))}J.prototype.toString=function(){const t=[];var e=this.j;e&&t.push(Pt(e,pn,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.o)&&t.push(Pt(e,pn,!0),"@"),t.push(Et(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.u,n!=null&&t.push(":",String(n))),(n=this.h)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Pt(n,n.charAt(0)=="/"?Bi:bi,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",Pt(n,Gi)),t.join("")},J.prototype.resolve=function(t){const e=x(this);let n=!!t.j;n?At(e,t.j):n=!!t.o,n?e.o=t.o:n=!!t.g,n?e.g=t.g:n=t.u!=null;var s=t.h;if(n)St(e,t.u);else if(n=!!t.h){if(s.charAt(0)!="/")if(this.g&&!this.h)s="/"+s;else{var h=e.h.lastIndexOf("/");h!=-1&&(s=e.h.slice(0,h+1)+s)}if(h=s,h==".."||h==".")s="";else if(h.indexOf("./")!=-1||h.indexOf("/.")!=-1){s=h.lastIndexOf("/",0)==0,h=h.split("/");const u=[];for(let g=0;g<h.length;){const d=h[g++];d=="."?s&&g==h.length&&u.push(""):d==".."?((u.length>1||u.length==1&&u[0]!="")&&u.pop(),s&&g==h.length&&u.push("")):(u.push(d),s=!0)}s=u.join("/")}else s=h}return n?e.h=s:n=t.i.toString()!=="",n?Ie(e,vn(t.i)):n=!!t.m,n&&(e.m=t.m),e};function x(t){return new J(t)}function At(t,e,n){t.j=n?It(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function St(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.u=e}else t.u=null}function Ie(t,e,n){e instanceof Rt?(t.i=e,qi(t.i,t.l)):(n||(e=Pt(e,Hi)),t.i=new Rt(e,t.l))}function E(t,e,n){t.i.set(e,n)}function qt(t){return E(t,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),t}function It(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pt(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Ui),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ui(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var pn=/[#\/\?@]/g,bi=/[#\?:]/g,Bi=/[#\?]/g,Hi=/[#\?@]/g,Gi=/#/g;function Rt(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Z(t){t.g||(t.g=new Map,t.h=0,t.i&&Fi(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}l=Rt.prototype,l.add=function(t,e){Z(this),this.i=null,t=at(this,t);let n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function dn(t,e){Z(t),e=at(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function mn(t,e){return Z(t),e=at(t,e),t.g.has(e)}l.forEach=function(t,e){Z(this),this.g.forEach(function(n,s){n.forEach(function(h){t.call(e,h,s,this)},this)},this)};function yn(t,e){Z(t);let n=[];if(typeof e=="string")mn(t,e)&&(n=n.concat(t.g.get(at(t,e))));else for(t=Array.from(t.g.values()),e=0;e<t.length;e++)n=n.concat(t[e]);return n}l.set=function(t,e){return Z(this),this.i=null,t=at(this,t),mn(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},l.get=function(t,e){return t?(t=yn(this,t),t.length>0?String(t[0]):e):e};function _n(t,e,n){dn(t,e),n.length>0&&(t.i=null,t.g.set(at(t,e),H(n)),t.h+=n.length)}l.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(let s=0;s<e.length;s++){var n=e[s];const h=Et(n);n=yn(this,n);for(let u=0;u<n.length;u++){let g=h;n[u]!==""&&(g+="="+Et(n[u])),t.push(g)}}return this.i=t.join("&")};function vn(t){const e=new Rt;return e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),e}function at(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function qi(t,e){e&&!t.j&&(Z(t),t.i=null,t.g.forEach(function(n,s){const h=s.toLowerCase();s!=h&&(dn(this,s),_n(this,h,n))},t)),t.j=e}function Xi(t,e){const n=new wt;if(f.Image){const s=new Image;s.onload=M(K,n,"TestLoadImage: loaded",!0,e,s),s.onerror=M(K,n,"TestLoadImage: error",!1,e,s),s.onabort=M(K,n,"TestLoadImage: abort",!1,e,s),s.ontimeout=M(K,n,"TestLoadImage: timeout",!1,e,s),f.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function Ji(t,e){const n=new wt,s=new AbortController,h=setTimeout(()=>{s.abort(),K(n,"TestPingServer: timeout",!1,e)},1e4);fetch(t,{signal:s.signal}).then(u=>{clearTimeout(h),u.ok?K(n,"TestPingServer: ok",!0,e):K(n,"TestPingServer: server error",!1,e)}).catch(()=>{clearTimeout(h),K(n,"TestPingServer: error",!1,e)})}function K(t,e,n,s,h){try{h&&(h.onload=null,h.onerror=null,h.onabort=null,h.ontimeout=null),s(n)}catch{}}function Ki(){this.g=new Ri}function Pe(t){this.i=t.Sb||null,this.h=t.ab||!1}S(Pe,ze),Pe.prototype.g=function(){return new Xt(this.i,this.h)};function Xt(t,e){C.call(this),this.H=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Xt,C),l=Xt.prototype,l.open=function(t,e){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=t,this.D=e,this.readyState=1,Ct(this)},l.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const e={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};t&&(e.body=t),(this.H||f).fetch(new Request(this.D,e)).then(this.Pa.bind(this),this.ga.bind(this))},l.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Dt(this)),this.readyState=0},l.Pa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ct(this)),this.g&&(this.readyState=3,Ct(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wn(this)}else t.text().then(this.Oa.bind(this),this.ga.bind(this))};function wn(t){t.j.read().then(t.Ma.bind(t)).catch(t.ga.bind(t))}l.Ma=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.B.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Dt(this):Ct(this),this.readyState==3&&wn(this)}},l.Oa=function(t){this.g&&(this.response=this.responseText=t,Dt(this))},l.Na=function(t){this.g&&(this.response=t,Dt(this))},l.ga=function(){this.g&&Dt(this)};function Dt(t){t.readyState=4,t.l=null,t.j=null,t.B=null,Ct(t)}l.setRequestHeader=function(t,e){this.A.append(t,e)},l.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},l.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ct(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Xt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});function En(t){let e="";return bt(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function Re(t,e,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=En(n),typeof t=="string"?n!=null&&Et(n):E(t,e,n))}function T(t){C.call(this),this.headers=new Map,this.L=t||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(T,C);var Wi=/^https?$/i,Yi=["POST","PUT"];l=T.prototype,l.Fa=function(t){this.H=t},l.ea=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():en.g(),this.g.onreadystatechange=Mt(P(this.Ca,this));try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(u){Tn(this,u);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var h in s)n.set(h,s[h]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const u of s.keys())n.set(u,s.get(u));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(u=>u.toLowerCase()=="content-type"),h=f.FormData&&t instanceof f.FormData,!(Array.prototype.indexOf.call(Yi,e,void 0)>=0)||s||h||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,g]of n)this.g.setRequestHeader(u,g);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(u){Tn(this,u)}};function Tn(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.o=5,An(t),Jt(t)}function An(t){t.A||(t.A=!0,N(t,"complete"),N(t,"error"))}l.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=t||7,N(this,"complete"),N(this,"abort"),Jt(this))},l.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jt(this,!0)),T.Z.N.call(this)},l.Ca=function(){this.u||(this.B||this.v||this.j?Sn(this):this.Xa())},l.Xa=function(){Sn(this)};function Sn(t){if(t.h&&typeof c<"u"){if(t.v&&W(t)==4)setTimeout(t.Ca.bind(t),0);else if(N(t,"readystatechange"),W(t)==4){t.h=!1;try{const u=t.ca();t:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=u===0){let g=String(t.D).match(gn)[1]||null;!g&&f.self&&f.self.location&&(g=f.self.location.protocol.slice(0,-1)),s=!Wi.test(g?g.toLowerCase():"")}n=s}if(n)N(t,"complete"),N(t,"success");else{t.o=6;try{var h=W(t)>2?t.g.statusText:""}catch{h=""}t.l=h+" ["+t.ca()+"]",An(t)}}finally{Jt(t)}}}}function Jt(t,e){if(t.g){t.m&&(clearTimeout(t.m),t.m=null);const n=t.g;t.g=null,e||N(t,"ready");try{n.onreadystatechange=null}catch{}}}l.isActive=function(){return!!this.g};function W(t){return t.g?t.g.readyState:0}l.ca=function(){try{return W(this)>2?this.g.status:-1}catch{return-1}},l.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},l.La=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Pi(e)}};function In(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.F){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(t){const e={};t=(t.g&&W(t)>=2&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<t.length;s++){if(dt(t[s]))continue;var n=ji(t[s]);const h=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const u=e[h]||[];e[h]=u,u.push(n)}wi(e,function(s){return s.join(", ")})}l.ya=function(){return this.o},l.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nt(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Pn(t){this.za=0,this.i=[],this.j=new wt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nt("failFast",!1,t),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nt("baseRetryDelayMs",5e3,t),this.Za=Nt("retryDelaySeedMs",1e4,t),this.Ta=Nt("forwardChannelMaxRetries",2,t),this.va=Nt("forwardChannelRequestTimeoutMs",2e4,t),this.ma=t&&t.xmlHttpFactory||void 0,this.Ua=t&&t.Rb||void 0,this.Aa=t&&t.useFetchStreams||!1,this.O=void 0,this.L=t&&t.supportsCrossDomainXhr||!1,this.M="",this.h=new ln(t&&t.concurrentRequestLimit),this.Ba=new Ki,this.S=t&&t.fastHandshake||!1,this.R=t&&t.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=t&&t.Pb||!1,t&&t.ua&&this.j.ua(),t&&t.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&t&&t.detectBufferingProxy||!1,this.ia=void 0,t&&t.longPollingTimeout&&t.longPollingTimeout>0&&(this.ia=t.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}l=Pn.prototype,l.ka=8,l.I=1,l.connect=function(t,e,n,s){O(0),this.W=t,this.H=e||{},n&&s!==void 0&&(this.H.OSID=n,this.H.OAID=s),this.F=this.X,this.J=Vn(this,null,this.W),Wt(this)};function De(t){if(Rn(t),t.I==3){var e=t.V++,n=x(t.J);if(E(n,"SID",t.M),E(n,"RID",e),E(n,"TYPE","terminate"),Ot(t,n),e=new X(t,t.j,e),e.M=2,e.A=qt(x(n)),n=!1,f.navigator&&f.navigator.sendBeacon)try{n=f.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&f.Image&&(new Image().src=e.A,n=!0),n||(e.g=Mn(e.j,null),e.g.ea(e.A)),e.F=Date.now(),Gt(e)}jn(t)}function Kt(t){t.g&&(Ne(t),t.g.cancel(),t.g=null)}function Rn(t){Kt(t),t.v&&(f.clearTimeout(t.v),t.v=null),Yt(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&f.clearTimeout(t.m),t.m=null)}function Wt(t){if(!un(t.h)&&!t.m){t.m=!0;var e=t.Ea;gt||Ue(),pt||(gt(),pt=!0),re.add(e,t),t.D=0}}function $i(t,e){return an(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.G.concat(t.i),!0):t.I==1||t.I==2||t.D>=(t.Sa?0:t.Ta)?!1:(t.m=vt(P(t.Ea,t,e),kn(t,t.D)),t.D++,!0)}l.Ea=function(t){if(this.m)if(this.m=null,this.I==1){if(!t){this.V=Math.floor(Math.random()*1e5),t=this.V++;const h=new X(this,this.j,t);let u=this.o;if(this.U&&(u?(u=be(u),He(u,this.U)):u=this.U),this.u!==null||this.R||(h.J=u,u=null),this.S)t:{for(var e=0,n=0;n<this.i.length;n++){e:{var s=this.i[n];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break e}s=void 0}if(s===void 0)break;if(e+=s,e>4096){e=n;break t}if(e===4096||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Cn(this,h,e),n=x(this.J),E(n,"RID",t),E(n,"CVER",22),this.G&&E(n,"X-HTTP-Session-Id",this.G),Ot(this,n),u&&(this.R?e="headers="+Et(En(u))+"&"+e:this.u&&Re(n,this.u,u)),Se(this.h,h),this.Ra&&E(n,"TYPE","init"),this.S?(E(n,"$req",e),E(n,"SID","null"),h.U=!0,we(h,n,null)):we(h,n,e),this.I=2}}else this.I==3&&(t?Dn(this,t):this.i.length==0||un(this.h)||Dn(this))};function Dn(t,e){var n;e?n=e.l:n=t.V++;const s=x(t.J);E(s,"SID",t.M),E(s,"RID",n),E(s,"AID",t.K),Ot(t,s),t.u&&t.o&&Re(s,t.u,t.o),n=new X(t,t.j,n,t.D+1),t.u===null&&(n.J=t.o),e&&(t.i=e.G.concat(t.i)),e=Cn(t,n,1e3),n.H=Math.round(t.va*.5)+Math.round(t.va*.5*Math.random()),Se(t.h,n),we(n,s,e)}function Ot(t,e){t.H&&bt(t.H,function(n,s){E(e,s,n)}),t.l&&bt({},function(n,s){E(e,s,n)})}function Cn(t,e,n){n=Math.min(t.i.length,n);const s=t.l?P(t.l.Ka,t.l,t):null;t:{var h=t.i;let d=-1;for(;;){const I=["count="+n];d==-1?n>0?(d=h[0].g,I.push("ofs="+d)):d=0:I.push("ofs="+d);let v=!0;for(let R=0;R<n;R++){var u=h[R].g;const F=h[R].map;if(u-=d,u<0)d=Math.max(0,h[R].g-100),v=!1;else try{u="req"+u+"_"||"";try{var g=F instanceof Map?F:Object.entries(F);for(const[et,Y]of g){let z=Y;p(Y)&&(z=ge(Y)),I.push(u+et+"="+encodeURIComponent(z))}}catch(et){throw I.push(u+"type="+encodeURIComponent("_badmap")),et}}catch{s&&s(F)}}if(v){g=I.join("&");break t}}g=void 0}return t=t.i.splice(0,n),e.G=t,g}function Nn(t){if(!t.g&&!t.v){t.Y=1;var e=t.Da;gt||Ue(),pt||(gt(),pt=!0),re.add(e,t),t.A=0}}function Ce(t){return t.g||t.v||t.A>=3?!1:(t.Y++,t.v=vt(P(t.Da,t),kn(t,t.A)),t.A++,!0)}l.Da=function(){if(this.v=null,On(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var t=4*this.T;this.j.info("BP detection timer enabled: "+t),this.B=vt(P(this.Wa,this),t)}},l.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,O(10),Kt(this),On(this))};function Ne(t){t.B!=null&&(f.clearTimeout(t.B),t.B=null)}function On(t){t.g=new X(t,t.j,"rpc",t.Y),t.u===null&&(t.g.J=t.o),t.g.P=0;var e=x(t.na);E(e,"RID","rpc"),E(e,"SID",t.M),E(e,"AID",t.K),E(e,"CI",t.F?"0":"1"),!t.F&&t.ia&&E(e,"TO",t.ia),E(e,"TYPE","xmlhttp"),Ot(t,e),t.u&&t.o&&Re(e,t.u,t.o),t.O&&(t.g.H=t.O);var n=t.g;t=t.ba,n.M=1,n.A=qt(x(e)),n.u=null,n.R=!0,rn(n,t)}l.Va=function(){this.C!=null&&(this.C=null,Kt(this),Ce(this),O(19))};function Yt(t){t.C!=null&&(f.clearTimeout(t.C),t.C=null)}function Ln(t,e){var n=null;if(t.g==e){Yt(t),Ne(t),t.g=null;var s=2}else if(Ae(t.h,e))n=e.G,cn(t.h,e),s=1;else return;if(t.I!=0){if(e.o)if(s==1){n=e.u?e.u.length:0,e=Date.now()-e.F;var h=t.D;s=me(),N(s,new tn(s,n)),Wt(t)}else Nn(t);else if(h=e.m,h==3||h==0&&e.X>0||!(s==1&&$i(t,e)||s==2&&Ce(t)))switch(n&&n.length>0&&(e=t.h,e.i=e.i.concat(n)),h){case 1:tt(t,5);break;case 4:tt(t,10);break;case 3:tt(t,6);break;default:tt(t,2)}}}function kn(t,e){let n=t.Qa+Math.floor(Math.random()*t.Za);return t.isActive()||(n*=2),n*e}function tt(t,e){if(t.j.info("Error code "+e),e==2){var n=P(t.bb,t),s=t.Ua;const h=!s;s=new J(s||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||At(s,"https"),qt(s),h?Xi(s.toString(),n):Ji(s.toString(),n)}else O(2);t.I=0,t.l&&t.l.pa(e),jn(t),Rn(t)}l.bb=function(t){t?(this.j.info("Successfully pinged google.com"),O(2)):(this.j.info("Failed to ping google.com"),O(1))};function jn(t){if(t.I=0,t.ja=[],t.l){const e=fn(t.h);(e.length!=0||t.i.length!=0)&&(xt(t.ja,e),xt(t.ja,t.i),t.h.i.length=0,H(t.i),t.i.length=0),t.l.oa()}}function Vn(t,e,n){var s=n instanceof J?x(n):new J(n);if(s.g!="")e&&(s.g=e+"."+s.g),St(s,s.u);else{var h=f.location;s=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;const u=new J(null);s&&At(u,s),e&&(u.g=e),h&&St(u,h),n&&(u.h=n),s=u}return n=t.G,e=t.wa,n&&e&&E(s,n,e),E(s,"VER",t.ka),Ot(t,s),s}function Mn(t,e,n){if(e&&!t.L)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Aa&&!t.ma?new T(new Pe({ab:n})):new T(t.ma),e.Fa(t.L),e}l.isActive=function(){return!!this.l&&this.l.isActive(this)};function xn(){}l=xn.prototype,l.ra=function(){},l.qa=function(){},l.pa=function(){},l.oa=function(){},l.isActive=function(){return!0},l.Ka=function(){};function k(t,e){C.call(this),this.g=new Pn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.sa&&(t?t["X-WebChannel-Client-Profile"]=e.sa:t={"X-WebChannel-Client-Profile":e.sa}),this.g.U=t,(t=e&&e.Qb)&&!dt(t)&&(this.g.u=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dt(e)&&(this.g.G=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ct(this)}S(k,C),k.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},k.prototype.close=function(){De(this.g)},k.prototype.o=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=ge(t),t=n);e.i.push(new xi(e.Ya++,t)),e.I==3&&Wt(e)},k.prototype.N=function(){this.g.l=null,delete this.j,De(this.g),delete this.g,k.Z.N.call(this)};function Fn(t){pe.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}S(Fn,pe);function Un(){de.call(this),this.status=1}S(Un,de);function ct(t){this.g=t}S(ct,xn),ct.prototype.ra=function(){N(this.g,"a")},ct.prototype.qa=function(t){N(this.g,new Fn(t))},ct.prototype.pa=function(t){N(this.g,new Un)},ct.prototype.oa=function(){N(this.g,"b")},k.prototype.send=k.prototype.o,k.prototype.open=k.prototype.m,k.prototype.close=k.prototype.close,ye.NO_ERROR=0,ye.TIMEOUT=8,ye.HTTP_ERROR=6,ki.COMPLETE="complete",Di.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",C.prototype.listen=C.prototype.J,T.prototype.listenOnce=T.prototype.K,T.prototype.getLastError=T.prototype.Ha,T.prototype.getLastErrorCode=T.prototype.ya,T.prototype.getStatus=T.prototype.ca,T.prototype.getResponseJson=T.prototype.La,T.prototype.getResponseText=T.prototype.la,T.prototype.send=T.prototype.ea,T.prototype.setWithCredentials=T.prototype.Fa}).apply(typeof $t<"u"?$t:typeof self<"u"?self:typeof window<"u"?window:{});class L{constructor(i){this.uid=i}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(i){return i.uid===this.uid}}L.UNAUTHENTICATED=new L(null),L.GOOGLE_CREDENTIALS=new L("google-credentials-uid"),L.FIRST_PARTY=new L("first-party-uid"),L.MOCK_USER=new L("mock-user");let ie="12.8.0";function ls(l){ie=l}const te=new Qi("@firebase/firestore");function V(l,...i){if(te.logLevel<=si.DEBUG){const r=i.map(oi);te.debug(`Firestore (${ie}): ${l}`,...r)}}function ri(l,...i){if(te.logLevel<=si.ERROR){const r=i.map(oi);te.error(`Firestore (${ie}): ${l}`,...r)}}function oi(l){if(typeof l=="string")return l;try{return(function(r){return JSON.stringify(r)})(l)}catch{return l}}function ee(l,i,r){let o="Unexpected state";typeof i=="string"?o=i:r=i,hi(l,o,r)}function hi(l,i,r){let o=`FIRESTORE (${ie}) INTERNAL ASSERTION FAILED: ${i} (ID: ${l.toString(16)})`;if(r!==void 0)try{o+=" CONTEXT: "+JSON.stringify(r)}catch{o+=" CONTEXT: "+r}throw ri(o),new Error(o)}function Lt(l,i,r,o){let a="Unexpected state";typeof r=="string"?a=r:o=r,l||hi(i,a,o)}const y={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class _ extends es{constructor(i,r){super(i,r),this.code=i,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kt{constructor(){this.promise=new Promise(((i,r)=>{this.resolve=i,this.reject=r}))}}class us{constructor(i,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${i}`)}}class as{getToken(){return Promise.resolve(null)}invalidateToken(){}start(i,r){i.enqueueRetryable((()=>r(L.UNAUTHENTICATED)))}shutdown(){}}class cs{constructor(i){this.t=i,this.currentUser=L.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(i,r){Lt(this.o===void 0,42304);let o=this.i;const a=w=>this.i!==o?(o=this.i,r(w)):Promise.resolve();let c=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new kt,i.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const w=c;i.enqueueRetryable((async()=>{await w.promise,await a(this.currentUser)}))},p=w=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((w=>p(w))),setTimeout((()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?p(w):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new kt)}}),0),f()}getToken(){const i=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((o=>this.i!==i?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Lt(typeof o.accessToken=="string",31837,{l:o}),new us(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const i=this.auth&&this.auth.getUid();return Lt(i===null||typeof i=="string",2055,{h:i}),new L(i)}}class fs{constructor(i,r,o){this.P=i,this.T=r,this.I=o,this.type="FirstParty",this.user=L.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const i=this.A();return i&&this.R.set("Authorization",i),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class gs{constructor(i,r,o){this.P=i,this.T=r,this.I=o}getToken(){return Promise.resolve(new fs(this.P,this.T,this.I))}start(i,r){i.enqueueRetryable((()=>r(L.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bn{constructor(i){this.value=i,this.type="AppCheck",this.headers=new Map,i&&i.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ps{constructor(i,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zi(i)&&i.settings.appCheckToken&&(this.p=i.settings.appCheckToken)}start(i,r){Lt(this.o===void 0,3512);const o=c=>{c.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,V("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?r(c.token):Promise.resolve()};this.o=c=>{i.enqueueRetryable((()=>o(c)))};const a=c=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Bn(this.p));const i=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(i).then((r=>r?(Lt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Bn(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ds(l){const i=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(l);if(i&&typeof i.getRandomValues=="function")i.getRandomValues(r);else for(let o=0;o<l;o++)r[o]=Math.floor(256*Math.random());return r}class ms{static newId(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const a=ds(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<r&&(o+=i.charAt(a[c]%62))}return o}}function $(l,i){return l<i?-1:l>i?1:0}function ys(l,i){const r=Math.min(l.length,i.length);for(let o=0;o<r;o++){const a=l.charAt(o),c=i.charAt(o);if(a!==c)return Le(a)===Le(c)?$(a,c):Le(a)?1:-1}return $(l.length,i.length)}const _s=55296,vs=57343;function Le(l){const i=l.charCodeAt(0);return i>=_s&&i<=vs}const Hn="__name__";class U{constructor(i,r,o){r===void 0?r=0:r>i.length&&ee(637,{offset:r,range:i.length}),o===void 0?o=i.length-r:o>i.length-r&&ee(1746,{length:o,range:i.length-r}),this.segments=i,this.offset=r,this.len=o}get length(){return this.len}isEqual(i){return U.comparator(this,i)===0}child(i){const r=this.segments.slice(this.offset,this.limit());return i instanceof U?i.forEach((o=>{r.push(o)})):r.push(i),this.construct(r)}limit(){return this.offset+this.length}popFirst(i){return i=i===void 0?1:i,this.construct(this.segments,this.offset+i,this.length-i)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(i){return this.segments[this.offset+i]}isEmpty(){return this.length===0}isPrefixOf(i){if(i.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==i.get(r))return!1;return!0}isImmediateParentOf(i){if(this.length+1!==i.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==i.get(r))return!1;return!0}forEach(i){for(let r=this.offset,o=this.limit();r<o;r++)i(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(i,r){const o=Math.min(i.length,r.length);for(let a=0;a<o;a++){const c=U.compareSegments(i.get(a),r.get(a));if(c!==0)return c}return $(i.length,r.length)}static compareSegments(i,r){const o=U.isNumericId(i),a=U.isNumericId(r);return o&&!a?-1:!o&&a?1:o&&a?U.extractNumericId(i).compare(U.extractNumericId(r)):ys(i,r)}static isNumericId(i){return i.startsWith("__id")&&i.endsWith("__")}static extractNumericId(i){return ii.fromString(i.substring(4,i.length-2))}}class j extends U{construct(i,r,o){return new j(i,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...i){const r=[];for(const o of i){if(o.indexOf("//")>=0)throw new _(y.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter((a=>a.length>0)))}return new j(r)}static emptyPath(){return new j([])}}const ws=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends U{construct(i,r,o){return new nt(i,r,o)}static isValidIdentifier(i){return ws.test(i)}canonicalString(){return this.toArray().map((i=>(i=i.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(i)||(i="`"+i+"`"),i))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hn}static keyField(){return new nt([Hn])}static fromServerFormat(i){const r=[];let o="",a=0;const c=()=>{if(o.length===0)throw new _(y.INVALID_ARGUMENT,`Invalid field path (${i}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let f=!1;for(;a<i.length;){const p=i[a];if(p==="\\"){if(a+1===i.length)throw new _(y.INVALID_ARGUMENT,"Path has trailing escape character: "+i);const w=i[a+1];if(w!=="\\"&&w!=="."&&w!=="`")throw new _(y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+i);o+=w,a+=2}else p==="`"?(f=!f,a++):p!=="."||f?(o+=p,a++):(c(),a++)}if(c(),f)throw new _(y.INVALID_ARGUMENT,"Unterminated ` in path: "+i);return new nt(r)}static emptyPath(){return new nt([])}}class it{constructor(i){this.path=i}static fromPath(i){return new it(j.fromString(i))}static fromName(i){return new it(j.fromString(i).popFirst(5))}static empty(){return new it(j.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(i){return this.path.length>=2&&this.path.get(this.path.length-2)===i}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(i){return i!==null&&j.comparator(this.path,i.path)===0}toString(){return this.path.toString()}static comparator(i,r){return j.comparator(i.path,r.path)}static isDocumentKey(i){return i.length%2==0}static fromSegments(i){return new it(new j(i.slice()))}}function Es(l,i,r,o){if(i===!0&&o===!0)throw new _(y.INVALID_ARGUMENT,`${l} and ${r} cannot be used together.`)}function Ts(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}function A(l,i){const r={typeString:l};return i&&(r.value=i),r}function Vt(l,i){if(!Ts(l))throw new _(y.INVALID_ARGUMENT,"JSON must be an object");let r;for(const o in i)if(i[o]){const a=i[o].typeString,c="value"in i[o]?{value:i[o].value}:void 0;if(!(o in l)){r=`JSON missing required field: '${o}'`;break}const f=l[o];if(a&&typeof f!==a){r=`JSON field '${o}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){r=`Expected '${o}' field to equal '${c.value}'`;break}}if(r)throw new _(y.INVALID_ARGUMENT,r);return!0}const Gn=-62135596800,qn=1e6;class b{static now(){return b.fromMillis(Date.now())}static fromDate(i){return b.fromMillis(i.getTime())}static fromMillis(i){const r=Math.floor(i/1e3),o=Math.floor((i-1e3*r)*qn);return new b(r,o)}constructor(i,r){if(this.seconds=i,this.nanoseconds=r,r<0)throw new _(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new _(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(i<Gn)throw new _(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i);if(i>=253402300800)throw new _(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qn}_compareTo(i){return this.seconds===i.seconds?$(this.nanoseconds,i.nanoseconds):$(this.seconds,i.seconds)}isEqual(i){return i.seconds===this.seconds&&i.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:b._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(i){if(Vt(i,b._jsonSchema))return new b(i.seconds,i.nanoseconds)}valueOf(){const i=this.seconds-Gn;return String(i).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}b._jsonSchemaVersion="firestore/timestamp/1.0",b._jsonSchema={type:A("string",b._jsonSchemaVersion),seconds:A("number"),nanoseconds:A("number")};function As(l){return l.name==="IndexedDbTransactionError"}class Ss extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ot{constructor(i){this.binaryString=i}static fromBase64String(i){const r=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ss("Invalid base64 string: "+c):c}})(i);return new ot(r)}static fromUint8Array(i){const r=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(i);return new ot(r)}[Symbol.iterator](){let i=0;return{next:()=>i<this.binaryString.length?{value:this.binaryString.charCodeAt(i++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const o=new Uint8Array(r.length);for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(i){return $(this.binaryString,i.binaryString)}isEqual(i){return this.binaryString===i.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const Xn="(default)";class ne{constructor(i,r){this.projectId=i,this.database=r||Xn}static empty(){return new ne("","")}get isDefaultDatabase(){return this.database===Xn}isEqual(i){return i instanceof ne&&i.projectId===this.projectId&&i.database===this.database}}function Is(l,i){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _(y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ne(l.options.projectId,i)}class Ps{constructor(i,r=null,o=[],a=[],c=null,f="F",p=null,w=null){this.path=i,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=w,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Rs(l){return new Ps(l)}var Jn,m;(m=Jn||(Jn={}))[m.OK=0]="OK",m[m.CANCELLED=1]="CANCELLED",m[m.UNKNOWN=2]="UNKNOWN",m[m.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",m[m.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",m[m.NOT_FOUND=5]="NOT_FOUND",m[m.ALREADY_EXISTS=6]="ALREADY_EXISTS",m[m.PERMISSION_DENIED=7]="PERMISSION_DENIED",m[m.UNAUTHENTICATED=16]="UNAUTHENTICATED",m[m.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",m[m.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",m[m.ABORTED=10]="ABORTED",m[m.OUT_OF_RANGE=11]="OUT_OF_RANGE",m[m.UNIMPLEMENTED=12]="UNIMPLEMENTED",m[m.INTERNAL=13]="INTERNAL",m[m.UNAVAILABLE=14]="UNAVAILABLE",m[m.DATA_LOSS=15]="DATA_LOSS";new ii([4294967295,4294967295],0);const Ds=41943040;const Cs=1048576;function ke(){return typeof document<"u"?document:null}class Ns{constructor(i,r,o=1e3,a=1.5,c=6e4){this.Ci=i,this.timerId=r,this.R_=o,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(i){this.cancel();const r=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-o);a>0&&V("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),i()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}class Ve{constructor(i,r,o,a,c){this.asyncQueue=i,this.timerId=r,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(i,r,o,a,c){const f=Date.now()+o,p=new Ve(i,r,f,a,c);return p.start(o),p}start(i){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),i)}skipDelay(){return this.handleDelayElapsed()}cancel(i){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _(y.CANCELLED,"Operation cancelled"+(i?": "+i:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((i=>this.deferred.resolve(i)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Kn,Wn;(Wn=Kn||(Kn={})).Ma="default",Wn.Cache="cache";function Os(l){const i={};return l.timeoutSeconds!==void 0&&(i.timeoutSeconds=l.timeoutSeconds),i}const Ls="ComponentProvider",Yn=new Map;const ks="firestore.googleapis.com",zn=!0;class $n{constructor(i){if(i.host===void 0){if(i.ssl!==void 0)throw new _(y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ks,this.ssl=zn}else this.host=i.host,this.ssl=i.ssl??zn;if(this.isUsingEmulator=i.emulatorOptions!==void 0,this.credentials=i.credentials,this.ignoreUndefinedProperties=!!i.ignoreUndefinedProperties,this.localCache=i.localCache,i.cacheSizeBytes===void 0)this.cacheSizeBytes=Ds;else{if(i.cacheSizeBytes!==-1&&i.cacheSizeBytes<Cs)throw new _(y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=i.cacheSizeBytes}Es("experimentalForceLongPolling",i.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",i.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!i.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:i.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!i.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Os(i.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new _(y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _(y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _(y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!i.useFetchStreams}isEqual(i){return this.host===i.host&&this.ssl===i.ssl&&this.credentials===i.credentials&&this.cacheSizeBytes===i.cacheSizeBytes&&this.experimentalForceLongPolling===i.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===i.experimentalAutoDetectLongPolling&&(function(o,a){return o.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,i.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===i.ignoreUndefinedProperties&&this.useFetchStreams===i.useFetchStreams}}class js{constructor(i,r,o,a){this._authCredentials=i,this._appCheckCredentials=r,this._databaseId=o,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $n({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _(y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(i){if(this._settingsFrozen)throw new _(y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $n(i),this._emulatorOptions=i.emulatorOptions||{},i.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new as;switch(o.type){case"firstParty":return new gs(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new _(y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(i.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const o=Yn.get(r);o&&(V(Ls,"Removing Datastore"),Yn.delete(r),o.terminate())})(this),Promise.resolve()}}class Me{constructor(i,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=i}withConverter(i){return new Me(this.firestore,i,this._query)}}class B{constructor(i,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=i}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xe(this.firestore,this.converter,this._key.path.popLast())}withConverter(i){return new B(this.firestore,i,this._key)}toJSON(){return{type:B._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(i,r,o){if(Vt(r,B._jsonSchema))return new B(i,o||null,new it(j.fromString(r.referencePath)))}}B._jsonSchemaVersion="firestore/documentReference/1.0",B._jsonSchema={type:A("string",B._jsonSchemaVersion),referencePath:A("string")};class xe extends Me{constructor(i,r,o){super(i,r,Rs(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const i=this._path.popLast();return i.isEmpty()?null:new B(this.firestore,null,new it(i))}withConverter(i){return new xe(this.firestore,i,this._path)}}const Qn="AsyncQueue";class Zn{constructor(i=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ns(this,"async_queue_retry"),this._c=()=>{const o=ke();o&&V(Qn,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=i;const r=ke();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(i){this.enqueue(i)}enqueueAndForgetEvenWhileRestricted(i){this.uc(),this.cc(i)}enterRestrictedMode(i){if(!this.ec){this.ec=!0,this.sc=i||!1;const r=ke();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(i){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new kt;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(i().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(i){this.enqueueAndForget((()=>(this.Yu.push(i),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(i){if(!As(i))throw i;V(Qn,"Operation failed with retryable error: "+i)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(i){const r=this.ac.then((()=>(this.rc=!0,i().catch((o=>{throw this.nc=o,this.rc=!1,ri("INTERNAL UNHANDLED ERROR: ",ti(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=r,r}enqueueAfterDelay(i,r,o){this.uc(),this.oc.indexOf(i)>-1&&(r=0);const a=Ve.createAndSchedule(this,i,r,o,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&ee(47125,{Pc:ti(this.nc)})}verifyOperationInProgress(){}async Tc(){let i;do i=this.ac,await i;while(i!==this.ac)}Ic(i){for(const r of this.tc)if(r.timerId===i)return!0;return!1}Ec(i){return this.Tc().then((()=>{this.tc.sort(((r,o)=>r.targetTimeMs-o.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),i!=="all"&&r.timerId===i)break;return this.Tc()}))}Rc(i){this.oc.push(i)}hc(i){const r=this.tc.indexOf(i);this.tc.splice(r,1)}}function ti(l){let i=l.message||"";return l.stack&&(i=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),i}class Vs extends js{constructor(i,r,o,a){super(i,r,o,a),this.type="firestore",this._queue=new Zn,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const i=this._firestoreClient.terminate();this._queue=new Zn(i),this._firestoreClient=void 0,await i}}}class q{constructor(i){this._byteString=i}static fromBase64String(i){try{return new q(ot.fromBase64String(i))}catch(r){throw new _(y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(i){return new q(ot.fromUint8Array(i))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(i){return this._byteString.isEqual(i._byteString)}toJSON(){return{type:q._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(i){if(Vt(i,q._jsonSchema))return q.fromBase64String(i.bytes)}}q._jsonSchemaVersion="firestore/bytes/1.0",q._jsonSchema={type:A("string",q._jsonSchemaVersion),bytes:A("string")};class li{constructor(...i){for(let r=0;r<i.length;++r)if(i[r].length===0)throw new _(y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(i)}isEqual(i){return this._internalPath.isEqual(i._internalPath)}}class st{constructor(i,r){if(!isFinite(i)||i<-90||i>90)throw new _(y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+i);if(!isFinite(r)||r<-180||r>180)throw new _(y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=i,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(i){return this._lat===i._lat&&this._long===i._long}_compareTo(i){return $(this._lat,i._lat)||$(this._long,i._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:st._jsonSchemaVersion}}static fromJSON(i){if(Vt(i,st._jsonSchema))return new st(i.latitude,i.longitude)}}st._jsonSchemaVersion="firestore/geoPoint/1.0",st._jsonSchema={type:A("string",st._jsonSchemaVersion),latitude:A("number"),longitude:A("number")};class rt{constructor(i){this._values=(i||[]).map((r=>r))}toArray(){return this._values.map((i=>i))}isEqual(i){return(function(o,a){if(o.length!==a.length)return!1;for(let c=0;c<o.length;++c)if(o[c]!==a[c])return!1;return!0})(this._values,i._values)}toJSON(){return{type:rt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(i){if(Vt(i,rt._jsonSchema)){if(Array.isArray(i.vectorValues)&&i.vectorValues.every((r=>typeof r=="number")))return new rt(i.vectorValues);throw new _(y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rt._jsonSchemaVersion="firestore/vectorValue/1.0",rt._jsonSchema={type:A("string",rt._jsonSchemaVersion),vectorValues:A("object")};function ui(l,i,r){if((i=ts(i))instanceof li)return i._internalPath;if(typeof i=="string")return xs(l,i);throw je("Field path arguments must be of type string or ",l)}const Ms=new RegExp("[~\\*/\\[\\]]");function xs(l,i,r){if(i.search(Ms)>=0)throw je(`Invalid field path (${i}). Paths must not contain '~', '*', '/', '[', or ']'`,l);try{return new li(...i.split("."))._internalPath}catch{throw je(`Invalid field path (${i}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,l)}}function je(l,i,r,o,a){let c=`Function ${i}() called with invalid data`;c+=". ";let f="";return new _(y.INVALID_ARGUMENT,c+l+f)}const ei="@firebase/firestore",ni="4.10.0";class ai{constructor(i,r,o,a,c){this._firestore=i,this._userDataWriter=r,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new B(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const i=new Fs(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(i)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(i){if(this._document){const r=this._document.data.field(ui("DocumentSnapshot.get",i));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Fs extends ai{data(){return super.data()}}class Qt{constructor(i,r){this.hasPendingWrites=i,this.fromCache=r}isEqual(i){return this.hasPendingWrites===i.hasPendingWrites&&this.fromCache===i.fromCache}}class ft extends ai{constructor(i,r,o,a,c,f){super(i,r,o,a,f),this._firestore=i,this._firestoreImpl=i,this.metadata=c}exists(){return super.exists()}data(i={}){if(this._document){if(this._converter){const r=new Zt(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,i)}return this._userDataWriter.convertValue(this._document.data.value,i.serverTimestamps)}}get(i,r={}){if(this._document){const o=this._document.data.field(ui("DocumentSnapshot.get",i));if(o!==null)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _(y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const i=this._document,r={};return r.type=ft._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!i||!i.isValidDocument()||!i.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(i.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}ft._jsonSchemaVersion="firestore/documentSnapshot/1.0",ft._jsonSchema={type:A("string",ft._jsonSchemaVersion),bundleSource:A("string","DocumentSnapshot"),bundleName:A("string"),bundle:A("string")};class Zt extends ft{data(i={}){return super.data(i)}}class jt{constructor(i,r,o,a){this._firestore=i,this._userDataWriter=r,this._snapshot=a,this.metadata=new Qt(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const i=[];return this.forEach((r=>i.push(r))),i}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(i,r){this._snapshot.docs.forEach((o=>{i.call(r,new Zt(this._firestore,this._userDataWriter,o.key,o,new Qt(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(i={}){const r=!!i.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new _(y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((p=>{const w=new Zt(a._firestore,a._userDataWriter,p.doc.key,p.doc,new Qt(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:w,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const w=new Zt(a._firestore,a._userDataWriter,p.doc.key,p.doc,new Qt(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);let P=-1,M=-1;return p.type!==0&&(P=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),M=f.indexOf(p.doc.key)),{type:Us(p.type),doc:w,oldIndex:P,newIndex:M}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _(y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const i={};i.type=jt._jsonSchemaVersion,i.bundleSource="QuerySnapshot",i.bundleName=ms.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],o=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(r.push(c._document),o.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),i.bundle=(this._firestore,this.query._query,i.bundleName,"NOT SUPPORTED"),i}}function Us(l){switch(l){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:l})}}jt._jsonSchemaVersion="firestore/querySnapshot/1.0",jt._jsonSchema={type:A("string",jt._jsonSchemaVersion),bundleSource:A("string","QuerySnapshot"),bundleName:A("string"),bundle:A("string")};(function(i,r=!0){ls(ss),ns(new is("firestore",((o,{instanceIdentifier:a,options:c})=>{const f=o.getProvider("app").getImmediate(),p=new Vs(new cs(o.getProvider("auth-internal")),new ps(f,o.getProvider("app-check-internal")),Is(f,a),f);return c={useFetchStreams:r,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),bn(ei,ni,i),bn(ei,ni,"esm2020")})();const ci=null;async function bs(l,i){return console.log("[MOCK] Login attempt with email:",l),Promise.resolve({user:{uid:"mock-user-id",email:l,displayName:"Mock User"}})}async function Bs(){const l=document.getElementById("loginDialog"),i=document.getElementById("loginForm"),r=document.getElementById("cancelLoginBtn");if(!l||!i||!r)throw new Error("Login dialog elements not found");return l.showModal(),new Promise((o,a)=>{let c=!1;const f=()=>{i.removeEventListener("submit",Mt),r.removeEventListener("click",P),l.removeEventListener("cancel",M),l.removeEventListener("close",S)},p=()=>{c||(c=!0,f(),o())},w=H=>{c||(c=!0,f(),a(H))},P=()=>{l.close("cancel")},M=H=>{H.preventDefault(),l.close("cancel")},S=()=>{l.returnValue==="cancel"&&w(new Error("Login cancelled"))},Mt=async H=>{H.preventDefault();const xt=document.getElementById("loginEmail").value,se=document.getElementById("loginPassword").value;try{await os(ci,hs),await bs(xt,se),l.close("ok"),p()}catch{alert("Invalid username or password")}};r.addEventListener("click",P),l.addEventListener("cancel",M),l.addEventListener("close",S),i.addEventListener("submit",Mt)})}function Gs(l){let i=!1;rs(ci,async r=>{if(!i){if(!r||i){await Bs();return}i=!0,await l()}})}export{Gs as w};
